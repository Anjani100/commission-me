/*
v1.0
This JavaScript file parses a commission request JSON object
into appropriate HTML  representation for a customer to request
a commission. The customer's choices are then sent back to the server
via POST submission.

FUTURE MODIFICATIONS
-
*/

$(document).ready(function() {
  var data = $('#json_id').data('url');
  var catagory = data.categories[0];
  
  // Category Name
  $("<h1/>", {
    html: category.name
  }).appendTo("#com-req");
  
  $.each(category.steps, function(stepkey, step) {
    // Step Container
    var step_container = $("<div/>", {
      "class": "step"
    }).appendTo("#com-req");
    
    // Step Name
    $("<h2/>", {
      html: step.name
    }).appendTo(step_container);
    
    $.each(step.options, function(optkey, option) {
      // Option Container
      var option_container = $("<div/>", {
        "class": "option"
      }).appendTo(step_container);
      
      // Option Name
      $("<h3/>", {
        html: option.name
      }).appendTo(option_container);
      
      // Option Description
      $("<p/>", {
        html: option.description
      }).appendTo(option_container);
    });
  });
  
  // Buttons: Accept and Decline
  var button_container = $("<div/>", {
    "id": "review-select"
  }).appendTo("#com-req");
  
  $("<button/>", {
    "id": "accept",
    "class": "btn btn-primary btn-lg",
    "type": "button",
    html: "Accept"
  }).appendTo(button_container);
  $("<button/>", {
    "id": "decline",
    "class": "btn btn-default btn-lg",
    "type": "button",
    html: "Decline"
  }).appendTo(button_container);
});